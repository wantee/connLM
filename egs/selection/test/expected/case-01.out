
Step 1: Prepare data ...
./local/prep_data.sh --valid-percentage 0.1 --shuf-text true test/tmp/data
./local/prep_data.sh: Layouting indomain corpus with 999 lines...
=================================
Train size: 900
Valid size: 99
Test size: 0
=================================
./local/prep_data.sh: Layouting general corpus with 999 lines...
=================================
Train size: 900
Valid size: 99
Test size: 0
=================================
./local/prep_data.sh: Elapse time: 0hr0m1s

Step 2: Train in-domain model ...
../steps/learn_vocab.sh --config-file test/tmp/case-01/exp/conf/vocab.conf test/tmp/data/indomain/train test/tmp/case-01/exp/indomain
../steps/learn_vocab.sh: Learning vocab test/tmp/case-01/exp/indomain/vocab.clm from test/tmp/data/indomain/train
=================================
Words:  6349
Vocab size:  932
=================================
../steps/learn_vocab.sh: Elapse time: 0hr0m3s
../steps/run_standalone.sh --class-size  --train-thr 1 --eval-thr 1 rnn+maxent test/tmp/case-01/exp/conf test/tmp/case-01/exp/indomain test/tmp/data/indomain/train test/tmp/data/indomain/valid test/tmp/data/test
../steps/run_standalone.sh: Stage 1 --- Initialising model...
../steps/init_model.sh --init-config-file test/tmp/case-01/exp/conf/rnn+maxent/init.conf --output-config-file test/tmp/case-01/exp/conf/rnn+maxent/output.conf --class-size  --hs  --train-file test/tmp/data/indomain/train --train-config test/tmp/case-01/exp/conf/rnn+maxent/train.conf --train-threads 1 test/tmp/case-01/exp/indomain/vocab.clm test/tmp/case-01/exp/indomain/rnn+maxent
../steps/init_model.sh: Initializing model test/tmp/case-01/exp/indomain/vocab.clm to test/tmp/case-01/exp/indomain/rnn+maxent/init.clm ...
../steps/init_model.sh: Elapse time: 0hr0m0s
../steps/run_standalone.sh: Stage 2 --- Training model...
../steps/train_model.sh --train-config test/tmp/case-01/exp/conf/rnn+maxent/train.conf --eval-config test/tmp/case-01/exp/conf/eval.conf --train-threads 1 --eval-threads 1 test/tmp/data/indomain/train test/tmp/data/indomain/valid test/tmp/case-01/exp/indomain/rnn+maxent
Prerun Valid Entropy: 8.147761
ITERATION 01: TrEnt 7.284687, lr(0.5/0.1/0.5/0.5), W/s 32.8k, CVEnt: 7.285071
nnet accepted (01.clm)
ITERATION 02: TrEnt 6.603933, lr(0.5/0.1/0.5/0.5), W/s 27.4k, CVEnt: 7.190870
nnet accepted (02.clm)
ITERATION 03: TrEnt 6.167195, lr(0.5/0.1/0.5/0.5), W/s 34.8k, CVEnt: 7.086053
nnet accepted (03.clm)
ITERATION 04: TrEnt 5.793685, lr(0.5/0.1/0.5/0.5), W/s 37.7k, CVEnt: 7.003436
nnet accepted (04.clm)
ITERATION 05: TrEnt 5.477317, lr(0.5/0.1/0.5/0.5), W/s 35.6k, CVEnt: 6.992018
nnet accepted (05.clm)
ITERATION 06: TrEnt 5.126862, lr(0.25/0.05/0.25/0.25), W/s 38.0k, CVEnt: 6.932760
nnet accepted (06.clm)
ITERATION 07: TrEnt 4.952623, lr(0.125/0.025/0.125/0.125), W/s 36.9k, CVEnt: 6.977699
nnet rejected (07.clm)
../steps/train_model.sh: finished, too small rel. improvement 0
../steps/train_model.sh: Succeeded training the Neural Network : test/tmp/case-01/exp/indomain/rnn+maxent/final.clm
../steps/train_model.sh: Elapse time: 0hr0m3s
../steps/train_model.sh: Effective speed: 14.8k words/sec
../steps/run_standalone.sh: Stage 3 --- Testing model...
../steps/eval_model.sh --config-file test/tmp/case-01/exp/conf/eval.conf --eval-threads 1 test/tmp/case-01/exp/indomain/rnn+maxent test/tmp/data/test
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/indomain/rnn+maxent/final.clm ...
=================================
Eval Entropy: 7.117881
Eval PPL: 138.897857
Eval Speed: 83.3k words/sec
=================================
../steps/eval_model.sh: Elapse time: 0hr0m0s
../steps/run_standalone.sh: Elapse time: 0hr0m3s

Step 3: Train general model ...
../steps/learn_vocab.sh --config-file test/tmp/case-01/exp/conf/vocab.conf test/tmp/data/general/train test/tmp/case-01/exp/general
../steps/learn_vocab.sh: Learning vocab test/tmp/case-01/exp/general/vocab.clm from test/tmp/data/general/train
=================================
Words:  7289
Vocab size:  1062
=================================
../steps/learn_vocab.sh: Elapse time: 0hr0m2s
../steps/run_standalone.sh --class-size  --train-thr 1 --eval-thr 1 rnn+maxent test/tmp/case-01/exp/conf test/tmp/case-01/exp/general test/tmp/data/general/train test/tmp/data/general/valid test/tmp/data/test
../steps/run_standalone.sh: Stage 1 --- Initialising model...
../steps/init_model.sh --init-config-file test/tmp/case-01/exp/conf/rnn+maxent/init.conf --output-config-file test/tmp/case-01/exp/conf/rnn+maxent/output.conf --class-size  --hs  --train-file test/tmp/data/general/train --train-config test/tmp/case-01/exp/conf/rnn+maxent/train.conf --train-threads 1 test/tmp/case-01/exp/general/vocab.clm test/tmp/case-01/exp/general/rnn+maxent
../steps/init_model.sh: Initializing model test/tmp/case-01/exp/general/vocab.clm to test/tmp/case-01/exp/general/rnn+maxent/init.clm ...
../steps/init_model.sh: Elapse time: 0hr0m0s
../steps/run_standalone.sh: Stage 2 --- Training model...
../steps/train_model.sh --train-config test/tmp/case-01/exp/conf/rnn+maxent/train.conf --eval-config test/tmp/case-01/exp/conf/eval.conf --train-threads 1 --eval-threads 1 test/tmp/data/general/train test/tmp/data/general/valid test/tmp/case-01/exp/general/rnn+maxent
Prerun Valid Entropy: 8.156003
ITERATION 01: TrEnt 7.350025, lr(0.5/0.1/0.5/0.5), W/s 33.2k, CVEnt: 7.091510
nnet accepted (01.clm)
ITERATION 02: TrEnt 6.677921, lr(0.5/0.1/0.5/0.5), W/s 38.1k, CVEnt: 7.157512
nnet rejected (02.clm)
ITERATION 03: TrEnt 6.658860, lr(0.25/0.05/0.25/0.25), W/s 36.9k, CVEnt: 7.120865
nnet rejected (03.clm)
../steps/train_model.sh: finished, too small rel. improvement 0
../steps/train_model.sh: Succeeded training the Neural Network : test/tmp/case-01/exp/general/rnn+maxent/final.clm
../steps/train_model.sh: Elapse time: 0hr0m2s
../steps/train_model.sh: Effective speed: 10.9k words/sec
../steps/run_standalone.sh: Stage 3 --- Testing model...
../steps/eval_model.sh --config-file test/tmp/case-01/exp/conf/eval.conf --eval-threads 1 test/tmp/case-01/exp/general/rnn+maxent test/tmp/data/test
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/general/rnn+maxent/final.clm ...
=================================
Eval Entropy: 7.045963
Eval PPL: 132.143603
Eval Speed: 66.9k words/sec
=================================
../steps/eval_model.sh: Elapse time: 0hr0m0s
../steps/run_standalone.sh: Elapse time: 0hr0m2s

Step 4: Score general corpus ...
./local/score.sh --eval-conf test/tmp/case-01/exp/conf/eval.conf test/tmp/data/general.corpus test/tmp/case-01/exp/indomain/rnn+maxent/ test/tmp/case-01/exp/general/rnn+maxent/ 4
./local/score.sh: (Re)Computing lines...
./local/score.sh: Stage 1 --- Scoring indomain corpus...
./local/score.sh: Score job 1 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/indomain/rnn+maxent//score//score.1.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.1.log --pipe-input true test/tmp/case-01/exp/indomain/rnn+maxent/ sed -n '1,2500p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/indomain/rnn+maxent//final.clm ...
=================================
Eval Entropy: 7.008648
Eval PPL: 128.769606
Eval Speed: 38.1k words/sec
=================================
1 warnings in test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.1.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Score job 2 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/indomain/rnn+maxent//score//score.2.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.2.log --pipe-input true test/tmp/case-01/exp/indomain/rnn+maxent/ sed -n '2501,5000p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/indomain/rnn+maxent//final.clm ...
=================================
Eval Entropy: 7.097224
Eval PPL: 136.923332
Eval Speed: 33.9k words/sec
=================================
1 warnings in test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.2.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Score job 3 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/indomain/rnn+maxent//score//score.3.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.3.log --pipe-input true test/tmp/case-01/exp/indomain/rnn+maxent/ sed -n '5001,7500p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/indomain/rnn+maxent//final.clm ...
=================================
Eval Entropy: 7.077726
Eval PPL: 135.085229
Eval Speed: 34.2k words/sec
=================================
1 warnings in test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.3.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Score job 4 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/indomain/rnn+maxent//score//score.4.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.4.log --pipe-input true test/tmp/case-01/exp/indomain/rnn+maxent/ sed -n '7501,10000p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/indomain/rnn+maxent//final.clm ...
=================================
Eval Entropy: 7.000900
Eval PPL: 128.079875
Eval Speed: 44.7k words/sec
=================================
1 warnings in test/tmp/case-01/exp/indomain/rnn+maxent//score//log/score.4.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Stage 2 --- Scoring general corpus...
./local/score.sh: Score job 1 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/general/rnn+maxent//score//score.1.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/general/rnn+maxent//score//log/score.1.log --pipe-input true test/tmp/case-01/exp/general/rnn+maxent/ sed -n '1,2500p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/general/rnn+maxent//final.clm ...
=================================
Eval Entropy: 6.841345
Eval PPL: 114.670094
Eval Speed: 39.7k words/sec
=================================
1 warnings in test/tmp/case-01/exp/general/rnn+maxent//score//log/score.1.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Score job 2 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/general/rnn+maxent//score//score.2.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/general/rnn+maxent//score//log/score.2.log --pipe-input true test/tmp/case-01/exp/general/rnn+maxent/ sed -n '2501,5000p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/general/rnn+maxent//final.clm ...
=================================
Eval Entropy: 6.872199
Eval PPL: 117.148881
Eval Speed: 31.7k words/sec
=================================
1 warnings in test/tmp/case-01/exp/general/rnn+maxent//score//log/score.2.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Score job 3 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/general/rnn+maxent//score//score.3.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/general/rnn+maxent//score//log/score.3.log --pipe-input true test/tmp/case-01/exp/general/rnn+maxent/ sed -n '5001,7500p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/general/rnn+maxent//final.clm ...
=================================
Eval Entropy: 6.904328
Eval PPL: 119.787040
Eval Speed: 34.5k words/sec
=================================
1 warnings in test/tmp/case-01/exp/general/rnn+maxent//score//log/score.3.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Score job 4 log: 
../steps/eval_model.sh --eval-threads 1 --out-prob test/tmp/case-01/exp/general/rnn+maxent//score//score.4.prob --eval-opts --print-sent-prob=true --out-log-base=10 --log-file test/tmp/case-01/exp/general/rnn+maxent//score//log/score.4.log --pipe-input true test/tmp/case-01/exp/general/rnn+maxent/ sed -n '7501,10000p' test/tmp/data/general.corpus
../steps/eval_model.sh: Evaluating model test/tmp/case-01/exp/general/rnn+maxent//final.clm ...
=================================
Eval Entropy: 6.848336
Eval PPL: 115.227085
Eval Speed: 30.9k words/sec
=================================
1 warnings in test/tmp/case-01/exp/general/rnn+maxent//score//log/score.4.log.wf.
Total 1 warnings found.
../steps/eval_model.sh: Elapse time: 0hr0m1s
./local/score.sh: Elapse time: 0hr0m2s

Step 5: Select data ...
./local/select.sh test/tmp/data/general.corpus test/tmp/case-01/exp/indomain/rnn+maxent/score test/tmp/case-01/exp/general/rnn+maxent/score 0.0 test/tmp/case-01/exp/selected.rnn+maxent.0.0
Total sentences: 9981
Selected sentences: 4509
./local/select.sh: Elapse time: 0hr0m0s

Step 5: Select data ...
./local/select.sh test/tmp/data/general.corpus test/tmp/case-01/exp/indomain/rnn+maxent/score test/tmp/case-01/exp/general/rnn+maxent/score 0.5 test/tmp/case-01/exp/selected.rnn+maxent.0.5
Total sentences: 9981
Selected sentences: 137
./local/select.sh: Elapse time: 0hr0m0s

Step 5: Select data ...
./local/select.sh test/tmp/data/general.corpus test/tmp/case-01/exp/indomain/rnn+maxent/score test/tmp/case-01/exp/general/rnn+maxent/score 1.0 test/tmp/case-01/exp/selected.rnn+maxent.1.0
Total sentences: 9981
Selected sentences: 2
./local/select.sh: Elapse time: 0hr0m1s
