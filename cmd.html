<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>connLM: Command Line Tools in connLM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="connlm.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="connLMTextAndLogo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">connLM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cmd.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Command Line Tools in connLM </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="cmd_filter"></a>
The Model filter</h1>
<p>ConnLM supports a specific format used to refer a model file, which is called the <em> Model Filter </em>.</p>
<p>The format of model filter is</p>
<div class="fragment"><div class="line">mdl,[+-][ovc{comp1}c{comp2}]:file_name</div>
</div><!-- fragment --><p><code>file_name</code> is the name of model file. The middle part is the filter. Adding <code>+/-</code> to add or remove responding component of the model, default is <code>+</code>.</p>
<p>Filters include:</p>
<ul>
<li><code>o:</code> Output</li>
<li><code>v:</code> Vocab</li>
<li><code>c:</code> All component</li>
<li><code>c{comp_name}</code>: Component with name 'comp_name' </li>
</ul>
<p>For example, one can use following command line to view the weights of MaxEnt in one model:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ connlm-copy --format=txt mdl,c{maxent}:exp/rnn+maxent/final.clm - | less</div>
</div><!-- fragment --><p>Users can find many examples using model filter in the <code>egs/steps/run_cascade.sh</code>, where we merge multiple models with different components.</p>
<h1><a class="anchor" id="cmd_config"></a>
The Configurations and Options</h1>
<p>The low level I/O in connLM use the <a href="https://github.com/wantee/stutils">stutils</a> library.</p>
<p>All command line tools provide <code>--config</code> option to specify a configuration file (note that option passed by command line would override the value in configuration file), <code>--log-file</code> and <code>--log-level</code> options to specify logging file location and logging level.</p>
<p>For all connLM tools that will save a model file, there is a <code>--format</code> option to specify the storage format for writing. Currently, there are four types of storage format: Text, Binary, Zeros-Compress(ZC) and Short-Quantization(SQ). Text format save the model in a human readable way, the other three are all binary format.</p>
<p>ZC and SQ are used for compressing the weight of network. ZC will compress the consecutive zeros in weight, while SQ quantifies the float or double value to a short. These two method could be applied simultaneously, by passing 'ZC|SQ' to <code>--format</code>. Note that, in current implementation, we only do compress on the direct glue since it is usually of large size.</p>
<p>User could get the help message of a command line tool by typing the name of command line and <code>--help</code> option or just typing the name. Note that, there are some options are only valid or have different default values, when a related 'switch' option is set to a different value. One could make it show the 'hidden' option or default values by typing the command line with the 'switch' option set by the desired value and leave other option not set. For example, by default, typing <code>connlm-output</code> would show the default values for <code>--max-depth</code> and <code>--max-branch</code> for 'TopDown' method, however, if the command line is </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;connlm-output --help --method=BottomUp</div>
</div><!-- fragment --><p> The two default values for 'BottomUp' would be shown.</p>
<h1><a class="anchor" id="cmd_vocab"></a>
The connlm-vocab</h1>
<p><code>connlm-vocab</code> is used for learning vocabulary from text source. It reads in a text file and dumps out the vocabulary as a connLM model file. Available options are:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Usage    : connlm-vocab [options] &lt;text-file&gt; &lt;model-out&gt;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;e.g.:</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  connlm-vocab data/train exp/vocab.clm</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Options  :</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  --help                     : Print help (bool, default = false)</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  --log-file                 : Log file (string, default = &quot;/dev/stderr&quot;)</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  --log-level                : Log level (1-8) (int, default = 8)</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  --wordlist                 : File name of wordlist. (string, default = &quot;&quot;)</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  --max-alphabet-size        : Maximum size of alphabet for vocab. (int, default = 1000000)</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  --max-vocab-size           : Maximum size of Vocabulary. 0 denotes no limit. (int, default = 0)</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  --max-word-num             : Maximum number of words used to learn vocab. 0 denotes no limit. (ulong, default = 0)</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  --min-count                : Mininum count for a word to be used in learning vocab. 0 denotes no limit. (int, default = 0)</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  --format                   : storage format(Txt/Bin/Zeros-Compress/Short-Q) (string, default = &quot;Bin&quot;)</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  --config                   : config file (string, default = &quot;&quot;)</div>
</div><!-- fragment --><p>Two predefined words (&lt;/s&gt; and &lt;unk&gt;) will be added to the vocabulary automatically.</p>
<p><code>--max-alphabet-size</code> restricts the hard limit size of vocabulary can be learned, if the text source have too many words, this value have to be increased.</p>
<p>When training large corpus, one would not like to learn the vocabulary by going through the whole corpus. Thus, it provides the <code>--max-word-num</code> option, which controls the maximum number of words in text source used to learn vocabulary.</p>
<h2><a class="anchor" id="cmd_vocab_limited"></a>
Limited Vocabulary</h2>
<p>The learning process can be finer controlled to support the usage of limited vocabulary.</p>
<p>A manually procedure to limit vocabulary could be: replace the out-of-vocabulary words to a special token, i.e. <code>&lt;unk&gt;</code>, and then training with the processed data.</p>
<p>connLM comes with two different ways to avoid above preprocessing. First, one can restrict the size of learned vocabulary explicitly by passing the parameter with <code>--max-vocab-size</code> option. Second, one can specify a minimum occurrences for a word to be added to vocabulary, which is accomplished by <code>--min-count</code> option, i.e., any word occurs less than min-count times will be ignored. In both methods, the remaining words are the most frequent words.</p>
<h2><a class="anchor" id="cmd_vocab_fixed"></a>
Fixed Vocabulary</h2>
<p>The user could also force this command to use a predefined word list as vocabulary, passed by <code>--wordlist</code> option. Since it is necessary for connLM toolkit to know the occurrence count for every words, <code>connlm-vocab</code> still need to go through some text corpus to accumulate the occurrences.</p>
<h1><a class="anchor" id="cmd_output"></a>
The connlm-output</h1>
<p>The <code>connlm-output</code> command is used for generating output layer. The output layer of connLM is structured as a tree. Through this command, users could control the way how the output tree is build. Available options are:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ connlm-output --help</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Usage    : connlm-output [options] &lt;model-in&gt; &lt;model-out&gt;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;e.g.:</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  connlm-output exp/vocab.clm exp/output.clm</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;Options  :</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  --help                     : Print help (bool, default = false)</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  --log-file                 : Log file (string, default = &quot;/dev/stderr&quot;)</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  --log-level                : Log level (1-8) (int, default = 8)</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  --method                   : Constructing method(TopDown/BottomUp) (string, default = &quot;TopDown&quot;)</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  --max-depth                : Maximum depth of output tree (int, default = 2)</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  --max-branch               : Maximum branch of output tree (int, default = 100)</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  --format                   : storage format(Txt/Bin/Zeros-Compress/Short-Q) (string, default = &quot;Bin&quot;)</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  --config                   : config file (string, default = &quot;&quot;)</div>
</div><!-- fragment --><p><code>--method</code> is to specify the constructing method, which could be "TopDown" or "BottomUp". As the name indicated, with different constructing method, the resulting tree will be build in the order of either from top to bottom or from bottom to top. For details of the constructing process, please refer to <a class="el" href="model_network_output.html#model_network_output_process">The Building Process</a>.</p>
<p>The tree is constructing based on the counts of words, thus the input model file, <code>&lt;model-in&gt;</code>, must contain the vocabulary.</p>
<p><code>--max-depth</code> and <code>--max-branch</code> specify the maximum depth of the tree, and the maximum number of branches for each node in the tree. <code>--max-depth</code> could be set to zero, which indicates that no constraints of depth would be applied.</p>
<p>If <code>--method</code> is "TopDown", the default value for <code>--max-depth</code> is 2, and <code>--max-branch</code> is 100. This is basically the same as Class-based Factorization introduced by the <a href="http://www.fit.vutbr.cz/~imikolov/rnnlm/thesis.pdf">original rnnlm paper </a>, and implemented in the <a href="http://www.fit.vutbr.cz/~imikolov/rnnlm/">RNNLM Toolkit </a>.</p>
<p>If <code>--method</code> is "BottomUp", the default value for <code>--max-depth</code> is 0, and <code>--max-branch</code> is 2. This corresponds to the <a href="http://www.iro.umontreal.ca/~lisa/pointeurs/hierarchical-nnlm-aistats05.pdf">Hierarchical Softmax </a>, implemented in the <a href="https://code.google.com/archive/p/word2vec/">word2vec toolkit </a>.</p>
<p>User can see the above default values by passing only the <code>--method</code> option without other arguments to <code>connlm-output</code>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">connLM</a></li>
    <li class="footer">Generated on Tue Jun 13 2017 20:48:21 for connLM by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
